파일 입출력
===
### 파일과 스트림
* 프로그램상에서 파일에 저장되어 있는 데이터를 참조하기 위해서는 프로그램과 파일 사이에 '스트림'을 형성해야 데이터를 주고 받을 수 있다. 여기서 **스트림(stream)은 데이터 이동의 경로가 되는 다리 역할을 한다.**
파일과 스트림의 형성은 **운영체제에 의해서 그 구조가 결정되고 관리되는 대상**이다.

#### 스트림의 형성을 요청하는 함수(fopen)
* 스트림을 형성할 때 호출하는 함수로서 프로그램상에서 파일과 스트림을 형성할 수 있다.
* FILE구조체의 포인터를 이용해서 **파일에 데이터를 저장하거나 파일에 저장된 데이터를 읽는다.**
```cpp
#include <stdio.h>

//함수의 첫번째 인자로는 스트림을 형성할 파일의 이름을, 두번째 인자로는 형성할 스트림의 종류에 대한 정보를 문자열의 형태로 전달
//성공 시 해당 파일의 FILE 구조체 변수의 주소 값, 실패 시 NULL 포인터 반환
//FILE 구조체의 변수는 파일을 가리키는 '지시자'의 역할을 한다.
FILE* fopen(const char* filename, const char* mode);
```
#### 입력 스트림과 출력 스트림
* 입력 스트림의 형성에 사용하는 **rt모드의 스트림**은 **텍스트 데이터를 읽기 위한 입력 스트림**을 뜻한다.
* 출력 스트림의 형성에 사용하는 **wt모드의 스트림**은 **텍스트 데이터를 쓰기 위한 입력 스트림**을 뜻한다.

```cpp
FILE* fp = fopen("data.txt", "wt");		//출력 스트림의 형성
FILE* fp = fopen("data.txt", "rt");		//입력 스트림의 형성

//출력 스트림 작성 시 파일의 경로를 포함해서 파일의 이름을 지정하면 원하는 경로에 생성된다.
//단, 파일의 경로를 지정하려면 지정할 디렉터리에 미리 생성되어야 한다.
FILE* fp = fopen("C:\\Project\\data.txt","wt");
```

#### 스트림의 소멸을 요청하는 함수(fclose)
* fopen함수의 반대 기능으로서 fclose함수는 스트림을 해체할 때 호출하는 함수 또는 파일을 닫는 함수이다.

```cpp
#include <stdio.h>

//성공 시 0, 실패 시 EOF를 반환
int fclose(FILE* stream);
```
#### fopen함수의 호출로 개방되었던 파일을 닫아줘야하는 이유

* **운영체제가 할당한 자원의 반환**
  *  운영체제에 할당된 파일에 대한 자원(주로 메모리)은 **파일을 닫아주지 않으면 자원 손실을 초래**하기 때문에 fclose함수를 호출해서 <br/>자원을 반환한다.
* **버퍼링 되었던 데이터의 출력**
  * 운영체제는 프로그램과 파일 사이에 입출력 버퍼를 둬서 성능의 향상을 도모하는데, **데이터**는 **출력버퍼에 저장되었다가 운영체제가 <br/>정해놓은 버퍼링 방식에 따라서 뒤늦게 파일에 저장**이 된다. 데이터 손실(프로그램의 오류)을 예방하기 위하여 **fclose함수의 호출**을<br/>통해 파일을 닫아주면 **출력 버퍼에 저장되어 있던 데이터가 파일로 이동하면서 출력버퍼는 비워지게 된다.**

#### 출력버퍼를 비우는 함수(fflush)
[fflush함수](https://github.com/YouAndMeToo3323/TIL/blob/main/C/learn/%EC%8A%A4%ED%8A%B8%EB%A6%BC%EA%B3%BC_%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9D%98_%EC%9D%B4%EB%8F%99.md#%ED%91%9C%EC%A4%80-%EC%9E%85%EC%B6%9C%EB%A0%A5-%ED%95%A8%EC%88%98)







